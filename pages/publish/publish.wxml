<!-- ===================== 顶部子 Tab ===================== -->
<view class="tabs">
  <view class="tab {{currentSubTab==='driver'?'active':''}}" data-tab="driver"    bindtap="onSubTabChange">司机发布</view>
  <view class="tab {{currentSubTab==='passenger'?'active':''}}" data-tab="passenger" bindtap="onSubTabChange">乘客需求</view>
</view>

<!-- ===================== 表单卡片 ===================== -->
<view class="form-card">
  <!-- 出发城市 -->
  <view class="input-row">
    <text class="label">出发城市</text>
    <input class="input"
           placeholder="输入出发城市"
           value="{{departure_place.city}}"
           bindinput="onDepartureInput" />
  </view>
  <!-- 建议 -->
  <view class="suggestion-list" wx:if="{{departureSuggestions.length}}">
    <block wx:for="{{departureSuggestions}}" wx:key="city">
      <view class="suggest-item" data-item="{{item}}" bindtap="chooseDeparture">
        {{item.city}}, {{item.state}}
      </view>
    </block>
  </view>

  <!-- 目的城市 -->
  <view class="input-row">
    <text class="label">目的城市</text>
    <input class="input"
           placeholder="输入目的城市"
           value="{{arrival_place.city}}"
           bindinput="onArrivalInput" />
  </view>
  <!-- 建议 -->
  <view class="suggestion-list" wx:if="{{arrivalSuggestions.length}}">
    <block wx:for="{{arrivalSuggestions}}" wx:key="city">
      <view class="suggest-item" data-item="{{item}}" bindtap="chooseArrival">
        {{item.city}}, {{item.state}}
      </view>
    </block>
  </view>

  <!-- 出发日期 & 时间 -->
  <view class="input-row">
    <text class="label">出发日期</text>
    <picker class="picker" mode="date"
            start="{{todayString}}"
            value="{{departure_date}}"
            bindchange="onDepartDateChange">
      <view>{{departure_date || '请选择日期'}}</view>
    </picker>
  </view>
  <view class="input-row">
    <text class="label">出发时间</text>
    <picker class="picker" mode="time"
            value="{{departure_time}}"
            bindchange="onDepartTimeChange">
      <view>{{departure_time || '00:00'}}</view>
    </picker>
  </view>

  <!-- ===== 分支字段 ===== -->
  <!-- 司机发布：车型 + 空余座位 -->
  <block wx:if="{{currentSubTab==='driver'}}">
    <view class="input-row">
      <text class="label">车型(选填)</text>
      <input class="input"
             placeholder="如 Toyota Camry"
             value="{{car_model}}"
             data-field="car_model"
             bindinput="onInputChange" />
    </view>
    <view class="input-row">
      <text class="label">空余座位</text>
      <input class="input"
             type="number"
             placeholder="默认 3"
             value="{{empty_seats}}"
             data-field="empty_seats"
             bindinput="onInputChange" />
    </view>
  </block>

  <!-- 乘客需求：乘坐人数 -->
  <block wx:elif="{{currentSubTab==='passenger'}}">
    <view class="input-row">
      <text class="label">乘坐人数</text>
      <input class="input"
             type="number"
             placeholder="默认 1"
             value="{{passenger_number}}"
             data-field="passenger_number"
             bindinput="onInputChange" />
    </view>
  </block>

  <!-- 公共字段：价格/人 & 微信号 -->
  <view class="input-row">
    <text class="label">价格 / 人</text>
    <input class="input"
           type="number"
           placeholder="必填"
           value="{{price}}"
           data-field="price"
           bindinput="onInputChange" />
  </view>
  <view class="input-row">
    <text class="label">微信号</text>
    <input class="input"
           placeholder="用于联系"
           value="{{contact_wechat}}"
           data-field="contact_wechat"
           bindinput="onInputChange" />
  </view>

  <!-- 提交 -->
  <button class="publish-btn" type="primary" bindtap="submitRide">发布顺风车</button>
</view>
