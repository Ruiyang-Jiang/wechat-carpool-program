<!-- ======= 顶部 Tab ======= -->
<view class="tabs">
  <view class="tab {{activeTab==='rides'?'active':''}}" data-tab="rides" bindtap="switchTab">找乘客</view>
  <view class="tab {{activeTab==='people'?'active':''}}" data-tab="people" bindtap="switchTab">找司机</view>
</view>

<!-- ========================================================= -->
<!-- ===================== 车 找 人 =========================== -->
<!-- ========================================================= -->
<block wx:if="{{activeTab==='rides'}}">
  <view class="form-card">
    <p class="prompt">请输入出发城市&目的城市并从建议框中选择地址</p>
    <!-- 出发城市 -->
    <view class="input-row">
      <text class="label">出发城市</text>
      <input class="input"
             placeholder="输入出发城市"
             value="{{departureQuery}}"
             bindinput="onDepartureInput"
             bindblur="onDepartureBlur" />
    </view>
    <!-- 下拉建议 -->
    <view class="suggestion-list" wx:if="{{departureSuggestions.length}}">
      <block wx:for="{{departureSuggestions}}" wx:key="city">
        <view class="suggest-item"
              data-item="{{item}}"
              bindtap="chooseDeparture">
          {{item.city}}, {{item.state}}
        </view>
      </block>
    </view>

    <!-- 目的城市 -->
    <view class="input-row">
      <text class="label">目的城市</text>
      <input class="input"
             placeholder="输入目的城市"
             value="{{arrivalQuery}}"
             bindinput="onArrivalInput"
             bindblur="onArrivalBlur" />
    </view>
    <!-- 下拉建议 -->
    <view class="suggestion-list" wx:if="{{arrivalSuggestions.length}}">
      <block wx:for="{{arrivalSuggestions}}" wx:key="city">
        <view class="suggest-item"
              data-item="{{item}}"
              bindtap="chooseArrival">
          {{item.city}}, {{item.state}}
        </view>
      </block>
    </view>

    <!-- 出发日期 -->
    <view class="input-row">
      <text class="label">出发日期</text>
      <picker mode="date"
              start="{{todayString}}"
              value="{{searchDate}}"
              bindchange="onSearchDateChange">
        <view class="picker">
          {{searchDate || '请选择日期'}}
        </view>
      </picker>
    </view>

    <!-- 搜索按钮 -->
    <button class="search-btn" type="primary" bindtap="searchRides">搜索顺风车</button>
  </view>
</block>

<!-- ======= 页脚：免责声明/协议/反馈/账号 ======= -->
<view class="privacy-footer">
  <view class="pf-tip">
    <text class="pf-tip-icon">ℹ️</text>
    <text class="pf-tip-text">
      免责声明：本小程序仅提供顺风车信息发布与沟通，不参与计价或收取费用。
    </text>
  </view>

  <view class="pf-actions" catchtap="handleStopPropagation">
    <button class="pf-btn" size="mini" bindtap="openTerms">
      <text>协议</text>/<text>隐私</text>
    </button>

    <button class="pf-btn" size="mini" bindtap="openFeedback">
      <text>意见反馈</text>
    </button>

    <button class="pf-btn pf-btn-danger" size="mini" bindtap="openAccountSettings">
      <text>删除账号</text>
    </button>
  </view>
</view>

<!-- ========================================================= -->
<!-- ===================== 人 找 车 =========================== -->
<!-- ========================================================= -->
<block wx:if="{{activeTab==='people'}}">
  <view class="form-card">
    <p class="prompt">请输入出发城市&目的城市并从建议框中选择地址</p>
    <!-- 出发城市 -->
    <view class="input-row">
      <text class="label">出发城市</text>
      <input class="input"
             placeholder="输入出发城市"
             value="{{departure2Query}}"
             bindinput="onDeparture2Input"
             bindblur="onDeparture2Blur" />
    </view>
    <view class="suggestion-list" wx:if="{{departure2Suggestions.length}}">
      <block wx:for="{{departure2Suggestions}}" wx:key="city">
        <view class="suggest-item"
              data-item="{{item}}"
              bindtap="chooseDeparture2">
          {{item.city}}, {{item.state}}
        </view>
      </block>
    </view>

    <!-- 目的城市 -->
    <view class="input-row">
      <text class="label">目的城市</text>
      <input class="input"
             placeholder="输入目的城市"
             value="{{destination2Query}}"
             bindinput="onDestination2Input"
             bindblur="onDestination2Blur" />
    </view>
    <view class="suggestion-list" wx:if="{{destination2Suggestions.length}}">
      <block wx:for="{{destination2Suggestions}}" wx:key="city">
        <view class="suggest-item"
              data-item="{{item}}"
              bindtap="chooseDestination2">
          {{item.city}}, {{item.state}}
        </view>
      </block>
    </view>

    <!-- 出发日期 -->
    <view class="input-row">
      <text class="label">出发日期</text>
      <picker mode="date"
              start="{{todayString}}"
              value="{{search2Date}}"
              bindchange="onSearch2DateChange">
        <view class="picker">
          {{search2Date || '请选择日期'}}
        </view>
      </picker>
    </view>

    <!-- 搜索按钮 -->
    <button class="search-btn" type="primary" bindtap="searchPeople">搜索乘客</button>
  </view>
</block>
